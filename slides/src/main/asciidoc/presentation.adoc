= Kafka: некоторые интересные практики
:revealjs_theme: black
:revealjs_customtheme: white_course.css
:revealjs_slideNumber:
:revealjs_history:
:revealjs_progress:
:encoding: UTF-8
:lang: ru
include::_doc_general_attributes.adoc[]
:doctype: article
:toclevels: 3
:imagesdir: images
:source-highlighter: highlightjs
:highlightjsdir: highlight
:icons: font
:iconfont-remote!:
:iconfont-name: font-awesome-4.7.0/css/font-awesome
:revealjs_mouseWheel: true
:revealjs_center: false
:revealjs_transition: none
:revealjs_width: 1600
:revealjs_height: 900

:!figure-caption:

[%notitle]
== Истории создания и развития

[cols="50a,50a",frame=none,grid=none]
|===
.^|
* 2011 - LinkedIn передал в open-source
* 2014 - Создана компания Confluent
* 2019 - Release 2.4.0
.^|image::kafka_logo.png[]
#Горизонтально-масштабируемая::
#Быстрая::
#Отказоустойчивая::
|===

== Теория

[cols="30a,70a",frame=none,grid=none]
|===
|
* Event log
** key
** body
** timestamp
* Topic
** offset
** partitions
** replication-factor
** retention
* Producer & Consumer
* Exactly-once semantics
|image::kafka_anatomy.png[]
|===

== 1 партиция -- 1 группа с 1 потребителем
image::kafka_consumer_0.png[width=75%]

== N партиций -- 1 группа с 1 потребителем
image::kafka_consumer_1.png[width=75%]

== N партиций -- N групп по M потребителей (M \<= N)
image::kafka_consumer_2.png[width=75%]

== N партиций -- 1 группа с M потребителем (M > N)
image::kafka_consumer_3.png[width=75%]

== Очередность получения событий
image::kafka_consumer_4.png[]

== Цифровой рабочий

Носимые технологии и системы позиционирования в режиме реального времени

image::digital_worker.png[]

== Поднимаем Kafka в Docker

== Утилиты

== Публикация событий

[source,java]
----
while (true) {}
----

== Потребление событий

== Обработка событий на KafkaStreams

== Интеграция

* Kafka Connect

== Интеграция с Clickhouse

== Интеграция с Esper

== И чё?

[%step]
* Kafka легко принести в свой проект
* Kafka можно использовать для
** взаимодействия модулей
** потоковой обработки
** в Event Sourcing архитектуре
* Есть наработки в проекте "Цифровой рабочий": icon:gitlab[size=lg] https://gitlab.croc.ru/akonyaev/kafka-blocks[gitlab.croc.ru/akonyaev/kafka-blocks]

[cols=">",frame=none]
|===
|*Алексей Коняев*, akonyaev@croc.ru
|===


